PROTOCOL Shout
	Status: S = {INITIATOR,IDLE,ACTIVE,DONE};
	SINIT = {INITIATOR,IDLE};
	STERM = {DONE}.
	Restrictions: R ;UI.

INITIATOR
	Spontaneously
	begin
		root:= true;
		Tree-neighbors:=0;
		send(Q) to N(x);
		counter:=0;
		become ACTIVE;
	end

IDLE
	Receiving(Q)
	begin
		root:= false;
		parent:= sender;
		Tree-neighbors:={sender};
		send(Yes) to {sender};
		counter:=1;
		if counter=|N(x)| then
			become DONE
		else
			send(Q) to N(x) − {sender};
			become ACTIVE;
		endif
	end

ACTIVE
	Receiving(Q)
	begin
		send(No) to {sender};
	end

	Receiving(Yes)
	begin
		Tree-neighbors:=Tree-neighbors ∪{sender};
		counter:=counter+1;
		if counter=|N(x)| then become DONE; endif
	end
	
	Receiving(No)
	begin
		counter:=counter+1;
		if counter=|N(x)| then become DONE; endif
	end